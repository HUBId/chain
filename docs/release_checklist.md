# Wallet release checklist

Use this checklist to document wallet readiness before tagging a release. Attach
links, logs, or screenshots for every step so auditors can trace evidence back
to the change record.

## Manual smoke tests by platform

### Linux (Ubuntu/Fedora reference images)

1. Build the CLI and GUI via `cargo xtask wallet-bundle` and install the bundle
   on a clean VM. Reuse the feature set documented in
   [`docs/wallet_platform_support.md`](wallet_platform_support.md) and confirm
   the binary hashes match the CI artifacts.
2. Follow the acceptance flow in the [wallet operator
   runbook](wallet_operator_runbook.md) (policy validation, send/receive,
   backup/restore, watch-only, telemetry export). Record screenshots of the GUI
   tabs described in [Phase 3](wallet_phase3_gui.md) and the RBAC/mTLS prompts
   introduced in [Phase 4](wallet_phase4_advanced.md).
3. Exercise the hybrid runtime (`scripts/run_hybrid_mode.sh`) and confirm the
   node+wallet observability surfaces stay healthy. Capture `journalctl`
   excerpts proving the runtime registered all security envelopes.

### macOS (Apple Silicon)

1. Generate the `.app` bundle or `.pkg` installer using the macOS instructions in
   [`docs/wallet_release_workflow.md`](wallet_release_workflow.md) and install it
   on a notarized host.
2. Validate GUI input methods (keyboard shortcuts, drag/drop backup imports,
   copy/paste for addresses) and confirm the notarization dialogs reference the
   correct developer ID.
3. Run the watch-only, ZSI, and hardware-bridge flows documented in
   [Phase 4](wallet_phase4_advanced.md) while recording screen captures. Attach
   telemetry exports to prove the RPC security scopes were exercised end-to-end.

### Windows (Server 2022 or Windows 11)

1. Package the MSI via `cargo xtask wallet-installer` and install it on a clean
   VM using the [platform support matrix](wallet_platform_support.md) as
   reference for dependencies.
2. Confirm SmartScreen sees a valid signature, start the GUI, and test the
   send/receive and multisig hook workflows. Record Event Viewer logs for the
   RPC service so the RBAC/mTLS handshake evidence is preserved.
3. Run the CLI regression suite (`cargo xtask test-wallet-feature-matrix` on a
   Windows runner or WSL) to capture the feature gating evidence required by the
   operator runbook.

## Proof enforcement and lifecycle controls

1. Follow the CLI/GUI flow in [`docs/quickstart_wallet.md`](quickstart_wallet.md)
   to capture init → sync → receive → send evidence with STWO enforcement turned
   on. Include GUI wireframes or screenshots for each tab.
2. Validate `[wallet.prover]` fail-closed behaviour by toggling
   `require_proof = true` and `allow_broadcast_without_proof = false`, then
   recording the error banner/action mapping from
   [`docs/wallet_error_matrix.md`](wallet_error_matrix.md).【F:config/wallet.toml†L125-L132】【F:docs/wallet_error_matrix.md†L7-L26】
3. Exercise lifecycle controls by triggering a rescan (manual and auto) and
   noting the `[wallet.rescan]` tuning used in your test profile. Capture the
   hybrid runner output from `scripts/run_hybrid_mode.sh` when staging combined
   node+wallet runs.【F:config/wallet.toml†L95-L102】【F:scripts/run_hybrid_mode.sh†L1-L55】

## Signature, SBOM, and provenance verification

1. Download all wallet artifacts from the CI run and compute `sha256sum` locally.
   Cross-check the digests against `dist/artifacts/wallet/SHA256SUMS.txt` and its
   cosign signature generated by the release workflow.
2. Validate each CycloneDX SBOM (`sbom-rpp-wallet-*.json`) using
   `cargo cyclonedx validate` and archive the results alongside the release
   ticket.
3. For every artifact listed in `dist/artifacts/wallet`, inspect the attached
   provenance statement (`.intoto.jsonl`) and cosign signature to ensure the
   builder metadata matches the workflow run recorded in GitHub.

## Documentation and governance sign-off

1. Update [`docs/wallet_release_status.md`](wallet_release_status.md) with the
   new tag, phase evidence, and any deferred items uncovered during testing.
2. Reference this checklist plus the [wallet advisory template](security/wallet_advisory_template.md)
   in the release PR description so stakeholders know where to capture GHSA
   coordination notes.
3. Confirm the public-facing docs (`docs/README.md`, `INSTALL.wallet.md`,
   `RELEASE.md`, and release notes) describe the final feature set, SemVer tier,
   and support window for the tag. Capture reviewer acknowledgements in the
   release tracking issue.
