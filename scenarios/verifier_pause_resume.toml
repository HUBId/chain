[sim]
seed = 987654
# Run through warmup, verifier pause, and backlog recovery.
duration_ms = 52000

[topology]
type = "small_world"
n = 24
k = 6
rewire_p = 0.14

[regions]
assignments = [
  "A", "B", "A", "B", "A", "B",
  "A", "B", "A", "B", "A", "B",
  "A", "B", "A", "B", "A", "B",
  "A", "B", "A", "B", "A", "B",
]

[links]
intra = { delay_ms = 25, jitter_ms = 6, loss = 0.0 }
A-B = { delay_ms = 140, jitter_ms = 35, loss = 0.03 }

[traffic.tx]
publisher_bias = { type = "zipf", s = 1.05 }

[traffic.tx.payload]
min_bytes = 4096
max_bytes = 32768

[[traffic.tx.phases]]
name = "warmup"
duration_ms = 8000
model = "poisson"
lambda_per_sec = 10.0

[[traffic.tx.phases]]
name = "backlog-pressure"
duration_ms = 20000
model = "on_off_bursty"
on_lambda_per_sec = 120.0
on_duration_ms = 1600
off_duration_ms = 600

[[traffic.tx.phases]]
name = "recovery"
duration_ms = 24000
model = "poisson"
lambda_per_sec = 12.0

[metrics]
json = "target/simnet/verifier-pause-resume/summaries/verifier_pause_resume.json"
csv = "target/simnet/verifier-pause-resume/summaries/verifier_pause_resume.csv"

[faults.service_stop]
# Pause the verifier mid-run to ensure backlog accumulation and restart-driven catch-up.
service = "verifier"
start_ms = 16000
duration_ms = 10000
restart_after_ms = 2000

[faults.churn]
# Light peer restarts during recovery to exercise routing while the verifier catches up.
start_ms = 36000
rate_per_min = 30.0
restart_after_ms = 2500
