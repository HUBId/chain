[sim]
seed = 1337
duration_ms = 52000

[topology]
type = "small_world"
n = 18
k = 5
rewire_p = 0.18

[regions]
assignments = [
  "CORE", "CORE", "CORE", "CORE", "CORE", "CORE",
  "EDGE", "EDGE", "EDGE", "EDGE", "EDGE", "EDGE",
  "ISLAND", "ISLAND", "ISLAND", "ISLAND", "ISLAND", "ISLAND",
]

[links]
default = { delay_ms = 32, jitter_ms = 11, loss = 0.015 }
CORE-EDGE = { delay_ms = 70, jitter_ms = 18, loss = 0.03 }
CORE-ISLAND = { delay_ms = 120, jitter_ms = 26, loss = 0.05 }
EDGE-ISLAND = { delay_ms = 180, jitter_ms = 42, loss = 0.09 }

[latency_profile]
trusted = { extra_delay_ms = 45, jitter_ms = 14 }
untrusted = { extra_delay_ms = 18, jitter_ms = 9 }

[traffic.tx]
publisher_bias = { type = "zipf", s = 1.12 }

[traffic.tx.payload]
min_bytes = 420
max_bytes = 2048

[[traffic.tx.phases]]
name = "warmup"
duration_ms = 9000
model = "poisson"
lambda_per_sec = 22.0

[[traffic.tx.phases]]
name = "chaos"
duration_ms = 26000
model = "on_off_bursty"
on_lambda_per_sec = 42.0
on_duration_ms = 5200
off_duration_ms = 1800

[[traffic.tx.phases]]
name = "recovery"
duration_ms = 17000
model = "poisson"
lambda_per_sec = 18.0

[faults.partition]
start_ms = 8000
duration_ms = 12000
group_a = "CORE"
group_b = "ISLAND"

[faults.churn]
start_ms = 15500
rate_per_min = 48.0
restart_after_ms = 3200

[faults.byzantine]
start_ms = 12000
spam_factor = 3
publishers = [0, 3, 6]

[metrics]
json = "target/simnet/consensus-chaos/summaries/consensus_chaos.json"
csv = "target/simnet/consensus-chaos/summaries/consensus_chaos.csv"
